# File Hash and Update Manager

Набор PHP-скриптов для вычисления SHA256 хэшей локальных файлов, кэширования результатов, а также автоматической проверки и обновления локальных образов по контрольным суммам с официальных серверов.

---

## Содержание

- **index.php** — Веб-интерфейс отображения файлов, их размеров, дат и SHA256 хэшей. Хэши отображаются с префиксом `sha256:` и являются кликабельными для копирования в буфер обмена.
- **compute_all_hashes.php** — CLI-скрипт для рекурсивного обхода выбранной папки с файлами, вычисления SHA256 и кэширования хэшей в `.hash_cache`. Поддерживается автоматическая очистка устаревших кэш-файлов.
- **update_files.php** (или другое имя) — Скрипт для проверки локальных файлов на актуальность с помощью официальных файлов с контрольными суммами (`SHA256SUMS`, `SHA256SUM`) по указанным URL. При обнаружении обновления скачивает свежий образ с прогресс-баром.

---

## Функционал

- Высокопроизводительное вычисление SHA256 с кэшированием для экономии времени.
- Веб-интерфейс с удобной визуализацией, копированием хэшей.
- Поддержка гибкого сопоставления локальных имен с официальными именами на серверах.
- Поддержка "latest" для автоматического определения актуальной версии образа (например, для CentOS Stream).
- Удобное скачивание с отображением прогресс-бара в консоли.
- Очистка кэша хэшей для удаления неактуальных записей.

---

## Использование

### Веб-интерфейс

Запустите `index.php` на веб-сервере, укажите папку с файлами и кэш — интерфейс отобразит данные с возможностью копирования хэшей.

### Вычисление всех хэшей

php compute_all_hashes.php


Вычисляет и кэширует SHA256 для всех файлов в папке `files`.

### Проверка и обновление локальных образов

php update_files.php


Проверяет файлы по ссылкам, обновляет локально устаревшие с прогресс-баром.

---

## Конфигурация

- В массиве `$filesToUpdate` файла `update_files.php` укажите ваши локальные имена, папки, URL и официальные имена образов.
- В `compute_all_hashes.php` задается корневая директория `files` и директория `.hash_cache`.
- Поддержка поддиректорий и кастомных имен для каждого файла.

---

## Требования

- PHP 7.4+ с поддержкой cURL
- Доступ в интернет для скачивания контрольных сумм и образов
- Правила доступа к файлам и папкам для записи кэша и скаченных файлов

---

## Лицензия

Открытый код для личного и коммерческого использования, с указанием авторства.
